# 软件安全

​        在互联网时代的今天，我们每天都在与软件打交道。软件在我们生活中扮演了越来越重要的角色。与此同时，软件也出现了了越来越多的问题不少恶意软件如雨后春笋一般纷纷冒出头来。

​        首先我们先从恶意软件的类型上来认识一下恶意软件。不同人对恶意软件的分类是不同的，可以根据其功能、运行方式等方面来进行不同的分类。

​         根据攻击的目标系统所处的阶段来对恶意软件进行划分，恶意软件入侵目标系统以达成自己目的的阶段总共有3个：（1）取得对目标程序的远程控制权，这是准备阶段；（2）维持对目标系统的远程控制权，这是攻击阶段；（3）通过远程控制在目标系统上面完成特定业务逻辑。这是攻击既遂阶段。通过上面三个阶段可将恶意软件分为3类：（1）获取对目标控制权类；（2）维持远程控制类；（3）完成特定业务类。

​         此外，卡巴斯基实验实将恶意软件分为：（1）不能进行自我复制的木马程序；（2）能够进行自我复制的恶意程序；（3）被恶意用户主动利用建立的恶意程序和组织攻击。

​        而按照我们的普遍认知，我们是把恶意软件分为以下几个类型。

​     （1）广告软件。广告软件是指那些以一个附带广告的电脑软件，以广告作为盈利来源的软件。这种软件会频繁的弹出广告信息，在后台未经过用户的同意会收集用户的信息用以牟利，拖慢系统的运行速度，当你意识到这是一个广告软件想要卸载的时候，因为这种软件通常请款下都是强制安装并且无法卸载的，很难会被卸载掉。一些恶意广告软件可能还会成为集成间谍软件，如键盘记录程序和隐私入侵其他软件等。想要防范这样的软件是比较容易的，首先不要轻易的安装共享软件或“免费软件”，这些软件中很可能会带来高风险；其次，因为某些广告软件是通过恶意网站安装的，所以我们在浏览网站的时候应该尽量避开无安全证书的网站以及不良网站；最后，最好采用安全性较好的网络浏览器，并且注意弥补系统漏洞。

​      （2）后门。后门程序一般是指哪些绕过安全性控制而获取对程序或系统访问权的程序方法。程序员会在开发过程中创建后门便于修改程序设计中的缺陷，但是在软件发布后，如果后门被不轨的黑客看到了，那么会容易被当成漏洞来进行攻击。一旦自己的计算机被安装了后门，该程序可能会窃取用户信息，包括用户输入的各种密码，将这些信息发送出去或者使得别人可以通过网络控制这些计算机，窃取计算机中的用户信息和文件。后门可以通过网络传播，例如通过浏览网页、通过邮件等等方式。很多后门都无法被大部分杀毒软件识别。那么怎么防范后门比较好呢？1)要先做好防范的基本功，首先要关闭本机不用的端口或只允许指定的端口访问；其次要使用专杀木马的软件，为了有效地防范木马后门；第三是要学会对进程操作，时时注意系统运行状况，看看是否有一些不明进程正运行并及时地将不明进程终止掉。3)其次要安全配置web服务器，首先要关闭不必要的服务；其次是建立安全账号策略和安全日志；第三是设置安全的IIS，删除不必要的IIS组件和进行IIS安全配置，最后还需要设置web站点目录的访问权限。3)配置安全的SQL服务器。同时我们还应该在平时的时候做好数据备份，这样在发生问题时，我们才能做好数据恢复。

​       （3）蠕虫病毒。这种病毒是一种常见的计算机病毒。它是利用网络进行复制和传播，传染途径是通过网络和电子邮件。软虫只会复制自身，并不会将代码插入其他程序，此外蠕虫不一定包含有效载荷，但大多数蠕虫都包含，有些蠕虫会被设计成只在没有有效载荷的情况下扩散。既然蠕虫病毒如此之厉害，那么我们又该怎么防范这种病毒呢？1）选择带有实时监控功能以及主动防御功能的杀毒软件，并且需要定时检查杀毒软件的相关模块的运行情况，如果你发现了异常就要及时进行处理。2）经常对病毒库进行，杀毒软件对病毒的查杀是以病毒的特征码为依据的，而病毒每天都层出不穷，尤其是在网络时代，蠕虫病毒的传播速度快、变种多，所以必须随时更新病毒库，以便能够查杀最新的病毒。3）提高防杀毒意识，不要轻易去点击陌生的站点，有可能里面就含有恶意代码。4）运行IE的时候，将internet区域的安全级别改为“高”。5） 不随意查看陌生邮件，尤其是带有附件的邮件。由于有的病毒邮件能够利用IE和outlook的漏洞自动执行，所以计算机用户需要升级IE和outlook程序及常用的其他应用程序。

​        （4）木马病毒。木马是一种伪装成正常文件的恶意软件，通常通过隐蔽的手段获得计算机运行权限，然后盗窃用户的隐私信息或者进行其他恶意行为。木马与一般的病毒不同，它不会自我繁殖，也并不“刻意”地去感染其他文件，它通过将自身伪装吸引用户下载执行，向施种木马者提供打开被种主机的门户，使施种者可以任意毁坏、窃取被种者的文件，甚至远程操控被种主机。木马病毒的产生严重危害着现代网络的安全运行。那么如何防范木马病毒呢？1）不要随意打开来历不明的邮件，特别是有附件的邮件。如果收到来历不明的邮件，最好不要打开，举报或者直接删除。2）不要下载来历不明的软件，下载软件最好选择知名网站或者应用商店进行下载，然后才能够进行安装。3）及时修补漏洞以及关闭可疑端口。一部分的木马时通过漏洞和后门来进行入侵，关闭可疑的窗口和修补漏洞对这一类木马有较好的防范作用。4）尽量少用共享文件夹。即使是在特殊情况下必须要使用共享文件夹，也要设置好账号和密码进行保护，而且要注意取消默认共享的选项。5）运行实时监控程序。在网络开启的情况下最好是能后台运行反木马实时监控程序和个人防火墙，并且需要定时对系统进行病毒的检查。6）经常升级程序和更新病毒库。

​       （5）浏览器劫持。通俗点说就是故意误导浏览器的行进路线的一种现象，常见的浏览器劫持现象有：访问正常网站时被转向到恶意网页、当输入错误的网址时被转到劫持软件指定的网站、输入字符时浏览器速度严重减慢、IE浏览器主页/搜索页等被修改为劫持软件指定的网站地址、自动添加网站到“受信任站点”、不经意的插件提示安装、收藏夹里自动反复添加恶意网站链接等，不少用户都深受其害。浏览器一旦被劫持，就意味这用户无法决定自己的电脑里将被存放进什么资料，这无疑存在巨大安全隐患。那么网站劫持如何防范呢？1）网站域名被泛解析。关闭域名的泛解析，很多用户的域名管理控制台都有泛解析记录，进入到域名管理平台址后点击对应的域名找到带有“*”的域名解析，删除掉就可以了。2）黑客劫持。对于备份的文件，找到被修改的文件，清理掉木马程序就可以了。3）浏览器被劫持。一般直接卸载掉出问题的程序重新安装。￥）运营商劫持。到环度网信申请一张SSL证书实现链接的https加密。

​         （6）病毒。病毒是编制者在计算机程序中插入的破坏计算机功能或者数据的代码，能影响计算机使用，能自我复制的一组计算机指令或者程序代码。它具有传播性、隐蔽性、感染性、潜伏性、可激发性、表现性或破坏性。计算机病毒的生命周期如下：开发期→传染期→潜伏期→发作期→发现期→消化期→消亡期。他往往传播的很快，而且很难被根除。那么如何防范病毒？防病毒的手段和以上的防范手段近似，并且需要经常更新系统。

​       （7）可疑程序。可疑程序是指有第三方安装并且具有潜在风险的程序。虽然程序是本身无害，但是根据经验表明，此类程序比正常程序具有更高的可能性被用作恶意目的，常见的有HTTP及SOCKS代理、远程管理程序等。此类程序通常可在用户不知情的情况下安装，并且在安装后会完全对用户隐藏。

​       （8）恶意程序。凡是不被包括在以上所描述的范围的程序，我们都可称之为恶意程序。

​        恶意程序的分类远不于此，但是我们综合来看防范手段都是有相似之处，甚至说很多防范手段都是相同的，只要操作得当，我们很大程度上来说是可以避免恶意程序的。可能是因为恶意软件的危害都是主要表现在强制安装，难以卸载，浏览器劫持，广告弹出，恶意手机用户信息，恶意卸载，恶意捆绑及其他侵害用户软件安装、使用和卸载知情权、选择权这8钟主要恶意行为中的一种或者是多种。

​        恶意软件的检测行为分为行为分析和恶意监测。行为分析是包含了行为信息捕获和对程序行为建模这两个步骤。行为分析包含了行为信息捕获和对程序行为建模这两个步骤。行为信息捕获按照捕获信息来源的不同包含了静态分析和动态分析这两个类型。对程序行为的建模是指用特定的模型来表示程序行为，目的是为了在后续的恶意判定过程里，可以依据模型间的比较来做出恶意软件的判定，或是进行变种测试。

​        恶意软件的典型行为主要有：（1）注册表操作。恶意软件可以通过在特定的位置增加键值、更改文件的关联程序或者在特定的位置增加键值等方法来修改注册表，这样的话，只要被恶意软件更改的文件的关联程序被打开，那么同时也会打开恶意软件；（2）文件操作。某些恶意软件的启动并不依靠于修改注册表，有些windows平台下的恶意软件则是需要通过修改win.ini和system.ini这个类型的系统文件来进行启动；（3）部署、调用工具。恶意软件的部署调用方式主要包括删除自身或更改自身文件名、部署类似系统1文件的文件这两个方式；（4）连接指定站点。几乎所有的而已软甲都需要访问网路，一般先发出向外的连接请求，再通过邮件的形式把用户的信息发送出去有一些恶意软件则是通过连接指定的服务器或者站点，并且下载大量的盗号木马和间谍软件，甚至将恶意软件下载器下载到用户的计算机系统上，然后加载运行、完成任务。有些恶意软件则是通过下载到用户计算机系统上的ARP恶意攻击程序来对其所在的局域网进行ARP欺骗攻击，从而严重影响网络安全；（5）隐藏活动界面。为了不被用户发现，恶意程序一般都会将自己的运行窗口隐藏起来。用户在任务栏和工具栏如果都没能看到恶意软件运行的痕迹，那么用户想要发现它的存在就会很困难，这样恶意软件就能够在用户系统中长期驻留和运行；（6）操作其他进程。比如说为了自己不被正在运行的防火墙和杀毒软件等，这类恶意程序会关闭正在运行的相关程序；（7）浏览器劫持。这种行为包含对用户所致网站的内容擅自进行添加、删除、修改与迫使用户访问指定网站，不能正常上网，限制用户修改浏览器设置这三种不同类型的行为现象；（8）恶意搜集用户信息。在用户没有授权许可或者没有明确提示用户的情况下，恶意收集用户的信息。

​        对于恶意软件的检测技术当前来说式分为三大类的。（1）基于特征码的检测方法；（2）行为监测法；（3）启发式方法。

​        我们再来详细说一说传统的两种行为行为信息捕获方法。

​       首先是静态分析。静态分析法是根据既定的外生变量值求得内生变量的分析方法，是对已发生的经济活动成果，进行综合性的对比分析的一种分析方法。静态分析方法直接扫描程序代码，提取程序关键语法，解释其语义，理解程序行为，根据预先设定的漏洞特征、安全规则等检测漏洞。

​        （1）词法分析。词法分析是最早的静态分析技术，它仅仅进行了语法上的检查。词法分析把程序划分成为一个一个的片断，然后再把每一个片段与一个“嫌疑数据库”进行比较，如果这个片段属于嫌疑片段，就进一步实行启发式判断。词法分析可以检查到的漏洞是很少的，而且往往只是一些已知的固定漏洞代码，漏报率是相当高的。

​        （2）规则检查。程序本身的安全性可以由安全规则描述。程序中本身就存在一些编程规则，就是一些通用的安全规则，也称作漏洞模式，比如程序在root权限下面要避免exec调用。规则调查方法将这些规则用特定语法来描述，由规则处理器来接受，并且将这个转换为分析器能够接受的内部表示，然后最后再将程序行为进行对比、检测。

​         （3）类型推导。自动推导程序中变量和函数的类型，来判断变量和函数的访问是否符合类型规则。静态漏洞检测的类型推导是由定型断言、推导规则和检查规则这三个部分组成。定型断言定义变量的初始类型，推导规则提供了推导系统的规则集合，检查规则用于判定推论结果是否是“良行为”。

​         基于类型推导的静态分析方法是适用于控制流无关的分析。但是对于控制流相关的特性则需要引入类型类型限定词和子类型的概念来扩展源语言的类型系统，使得新类型系统在源语言的数据类型上面加以扩展并且展示出类型之间的关系。类型限定词将变量类型表示的值的集合划分为几个互不相干的子集（子类型），表示不同安全级别。子类型变量可在任何时候替换父类型变量，反之不成立。利用类型限定关系可检测出越权限的访问记录。

​         我们再来看一看动态分析。动态分析根据程序的一次或多次执行的过程与结果，分析代码在时空性能方面所展现的性质。为了使动态分析有效，目标程序必须执行足够多次，以观察到完整的、不同的执行行为。通过分析代码覆盖度，确认动态分析是否已经足够。并且要尽可能小的影响程序原本的执行，否则性能测量不准确。动态分析的分析方法有（1）代码注入/插入。在原始代码中加入某些语句来收集运行时数据，这些语句不改变原程序的语义，但对原程序的性能有轻微的变化。这样做的优点是准确，缺点是需要修改源程序，注入的代码可能会影响测试（2）结果采样。以特定频率观察程序执行的特定时刻所展现出的行为与状态。外部观察者周期性监控被测程序，存储各个时刻的快照。基于收集到的数据，分析程序当时所处的状态，分析性能。这样做的有点是不需要修改程序，但是缺点是需要在采样频率与准确度之间折中，可能漏掉小的方法；难以监控内存的使用情况。（3）借助虚拟机获取程序性能数据。利用虚拟机进行性能监控，所有外部观察者执行的指令都被记录下来。这样做的优点是非常准确，可监控时空两方面的性能。缺点是与外部观察者绑定，不同的外部观察者提供不同的测量工具。

​        传统的漏洞挖掘技术（静态分析技术，动态分析技术）因耗时长耗力大，又难以对每一个软件进行全方位的漏洞扫描，更重要的是即使经过严格测试的软件，在投入运行后还是会发现有漏洞存在，所以这在一定程度上暴露了传统漏洞挖掘技术的缺陷，也促使研究出一种更为有效的漏洞挖掘方法来查找漏洞。这就是模糊测试方法。

​        模糊测试，是一种通过向目标系统提供预期的输入并监视异常结果来发现软件漏洞的方法。它具有自动化程度高、误报率低、可用性好、对目标源代码没有依赖等等优点。模糊测试是一个自动或者半自动的过程，这个过程包括了反复操纵目标软件并且为它提供了处理数据。模糊测试里面的关键是模糊测试用例的生成方法，用于生成模糊数据的工具可以叫做模糊器。我们可以把模糊器分为两个大类：基于生成的模糊器和基于变异的模糊器。前者对以由的数据样本应用变异技术创建新的测试用例，后者通过对目标协议或者是文件格式建模的方法从头开始进行产生测试用例。虽然模糊测试的设计不复杂，但是却能够揭示出程序中的漏洞。

​        模糊测试方法的选择取决于需要测试的数据所采用的格式、研究者的技能和目标应用程序。但是无论我们采用什么方法、进行什么样的测试，模糊测试的程序都会是一样的。我们可以把模糊测试分为以下几个阶段：（1）识别目标；（2）识别输入；（3）生成模糊测试数据；（4）执行模糊测试；（5）监视异常；（6）确定可利用性。

​        在模糊测试的过程里最重要的步骤是生成模糊测试数据，我们可以使用很多方法来生成模糊测试数据，大体上我们可以把它分为这几种。（1）预先生成测试用例。首先我们需要对一个专门规约进行研究，这样做的目的是为了能够理解所有被支持的数据结构和每种数据结构可以接受的值的范围。硬编码的数据包或者是文件随后将会被生成，用来测试边界条件或者是迫使规约发生违例，这些用例可以用来检测目标以实现规约的精确程度，这个方法的测试用例是可以用来被重用；这样做的缺点是需要事前做好大量的准备工作，而且测试用例是具有局限性的，一旦测试用例被用完，模糊测试就只能被迫结束了。（2）随机生成测试用例。这种方法的原理是很简单的，这个方法的工作原理就是大量的产生伪随机数据和待测数据，但是我们却要知道这个方法的缺点是很难逆向的找到引起软件异常的具体原因，这样做的效率很低。（3）协议变异人工测试。这个方法的测试过程在加载了目标应用程序之后，测试的人员之恶能通过输入不恰当的数据以试图来让服务器崩溃或者是使其产生非预期的行为。这个方法不需要自动化的模糊器，这个时候人就是模糊器。这样可以充分利用测试者自身的经验和直觉。（4）变异或强制性测试。从一个有效的协议或者是数据格式样本开始，持续不断的打断数据包或者是文件中的每一个字节、双字、字符串和字。所以对应的模糊工具的工作是修改了数据然后发送。这个方法几乎不再需要事先对被测的软件来进行研究，测试的数据的生成和发送都可以自动完成，但是由于大量的测试时间都是浪费在了生成数据上，所以这样做的效率也不高。（5）自动协议生成协议。这是一种更加高级的强制性的测试方法，在测试之前我们需要做前期的研究，包括了解释和解释协议规约或者是文件定义。但是和前面一种方法有区别的是它并不创建硬编码的测试用例，但是却创建过一个描述协议来规约怎么样来工作的文法。因此我们需要识别数据包或者是文件中的静态部分和动态部分。模糊器来动态解析这些模板，生成模糊测试的数据，然后向着被测目标发送模糊之后陈胜的包或者是文件。这个方法需要耗费一定的时间来产生文法或者是数据格式的定义。

​        虽然模糊测试相比于以前的技术已经进步了很多，但是确实是还存在很多的缺点。比如模糊测试技术不能保证畸形输入数据能够覆盖到所有的代码分支；对于后门、鉴权绕过等逻辑上面的错误依然是无能为力的等。

​        看完以上的分类或者是具体的技术，我们可以来分析一下我们我国的网络的现状以及关于软件行业的发展前景。

​       截止2018年6月， 中国网民规模高达8.02亿  ，较上半年新增2968万人，其中手机网民规模达到7.88亿，  网民通过手机接入互联网的比例高达98.3%。 这个数据充分说明了大家在上网的时候，手机成为了最主要的使用工具，而电脑倒是成为了次要的上网工具。

​        由于中国大陆销售的手机往往会移除Google应用，甚至移除Google服务框架，用本地应用取代，导致用户无法使用Google Play。因此，中国的Android 用户可以使用的应用商店主要来自智能手机厂商或者一些互联网公司，比较分散，质量也就参差不齐，存在的安全问题或许会更严重。在2018年11月15日据新华网报道，国家互联网应急中心近日通过自主检测、商店送检、主动爬取、投诉举报等四大方式，共检测到90个恶意APP，并分别通知了12个分中心协调27个应用商店、15个广告平台、4个个人网站、3个云平台等49个传播渠道下架这些恶意App。

​        而且在2018年，随着最后一名嫌疑人的批捕文书通过，国内首例针对恶意注册工具软件提供方的刑事打击案件尘埃落地，该起案件成功实现网络账号恶意注册从下游号商到中游注册养号工作室再到上游恶意注册软件提供方的全链条打击。杭州也是出现了首个互联网法庭，从国内的环境来看，虽然还不是很好，但是我们要意识到我们在关于恶意软件等方面更加的重视，所以总的来说，发展还不很不错的。

​        在未来的话，软件行业的发展趋势应该是可以朝着以下的几个方面来发展的。

​       （1）朝着全球化的方向发展 。全球化是世界经济发展的总体趋势，也是软件行业发展的趋势。软件行业发展到今天，软件的开发已经不再是某一个国家自身的发展，而是整个世界的共同发展。与此同时，单单只依靠某个国家自身的实力是很难实现软件技术全面提升的。因此，全球化软件协作交互模式应运而生，各个国家之间要相互配合，共同交流意见，朝着全球化发展，这样才是顺应了时代发展的潮流，从整体上促进软件行业的快速发展。 
　　（2）朝着模块化的方向发展。随着软件市场的竞争压力越来越大，企业所面临的IT环境更为复杂化，为了应对来自各方面的挑战问题，企业需要更多的创新能力和业务灵活性。提高模块化思想，帮助企业从根本上解决所面临的问题。模块化思想不仅可以通过抽象、分解、层次化、封装等科学方法对各种软件应用以及软件构件进行打包，从而提高企业的软件重用水平。除此之外，企业根据软件模块化思想，还提出了相关的SOA技术，通过对现有软件系统以及各种软件资源进行有效的整合和重用，使得企业能够更好应对业务的灵活性要求。 
　　（3）朝着创新能力方向发展 。为了使我国软件行业朝着创新能力方向发展，我们应该从两方面入手。一方面，我们应当大力支持拥有雄厚资金的软件企业，并且引进先进的国外技术，提高我国软件业的技术水平，推动我国软件企业做大做强，使软件更快更稳定的发展；同时，鼓励国外大型软件企业与国内企业进行合作投资，并及时沟通交流意见。另一方面，改进以往对软件行业人才的选拔形式，制定一些相关的优待政策，吸引国外优秀的管理和技术人才来我国工作，弥补高级管理人才海外经验不足以及大型软件设计人员缺失问题。根据长远发展的形势来看，我国软件产业需要大量有创新能力的人才，只有有了创新人才才能从整体意义上促进我国软件的开发与利用，才能为我国软件业的长期发展奠定坚实的基础。 

​       